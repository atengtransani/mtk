<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kuis Deret Aritmatika Futuristik</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&amp;family=Rajdhani:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Rajdhani', sans-serif;
    }
    
    .font-orbitron {
      font-family: 'Orbitron', sans-serif;
    }
    
    @keyframes glowPulse {
      0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3); }
      50% { box-shadow: 0 0 30px rgba(0, 255, 255, 0.8), 0 0 60px rgba(0, 255, 255, 0.5); }
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes scanLine {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }
    
    @keyframes borderGlow {
      0%, 100% { border-color: rgba(0, 255, 255, 0.5); }
      50% { border-color: rgba(0, 255, 255, 1); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }
    
    .animate-glow-pulse {
      animation: glowPulse 2s ease-in-out infinite;
    }
    
    .animate-slide-down {
      animation: slideDown 0.6s ease-out;
    }
    
    .animate-fade-in-up {
      animation: fadeInUp 0.6s ease-out;
    }
    
    .animate-float {
      animation: float 3s ease-in-out infinite;
    }
    
    .cyber-border {
      position: relative;
      border: 2px solid rgba(0, 255, 255, 0.3);
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.95) 100%);
    }
    
    .cyber-border::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.8), transparent);
      animation: scanLine 3s linear infinite;
    }
    
    .option-btn {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      border: 2px solid rgba(100, 255, 218, 0.3);
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.8) 0%, rgba(30, 41, 59, 0.8) 100%);
    }
    
    .option-btn:hover {
      border-color: rgba(0, 255, 255, 1);
      background: linear-gradient(135deg, rgba(0, 255, 255, 0.1) 0%, rgba(100, 255, 218, 0.1) 100%);
      transform: translateX(5px);
    }
    
    .option-btn.selected {
      border-color: rgba(0, 255, 255, 1);
      background: linear-gradient(135deg, rgba(0, 255, 255, 0.2) 0%, rgba(100, 255, 218, 0.2) 100%);
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
    }
    
    .neon-text {
      text-shadow: 0 0 10px rgba(0, 255, 255, 0.8), 0 0 20px rgba(0, 255, 255, 0.5), 0 0 30px rgba(0, 255, 255, 0.3);
    }
    
    .grid-background {
      background-image: 
        linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
      background-size: 50px 50px;
    }
    
    input:focus {
      outline: none;
      border-color: rgba(0, 255, 255, 1);
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
    }
    
    .loading-spinner {
      border: 3px solid rgba(0, 255, 255, 0.2);
      border-top-color: rgba(0, 255, 255, 1);
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .progress-glow {
      box-shadow: 0 0 10px rgba(0, 255, 255, 0.6), 0 0 20px rgba(0, 255, 255, 0.4);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-950 overflow-auto grid-background">
  <div id="app" class="w-full min-h-full p-3 md:p-6"><!-- Identity Screen -->
   <div id="identity-screen" class="max-w-xl mx-auto animate-slide-down">
    <div class="cyber-border rounded-xl p-5 md:p-7 backdrop-blur-xl"><!-- Logo -->
     <div class="text-center mb-5 animate-float">
      <div class="inline-block relative">
       <div class="w-16 h-16 bg-gradient-to-br from-cyan-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-3 animate-glow-pulse">
        <svg class="w-9 h-9 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
        </svg>
       </div>
       <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-24 h-24 bg-cyan-400 rounded-full blur-3xl opacity-20"></div>
      </div>
      <h1 id="quiz-title" class="text-2xl md:text-3xl font-orbitron font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 neon-text mb-2">KUIS DERET ARITMATIKA</h1>
      <p class="text-cyan-400 font-semibold text-sm tracking-wider"><span id="subject-label">MATEMATIKA</span> ‚Ä¢ <span id="class-level">KELAS X SMK</span></p>
     </div><!-- Info Box -->
     <div class="mb-5 p-4 rounded-lg border border-cyan-500/30 bg-gradient-to-r from-cyan-950/30 to-blue-950/30">
      <h3 class="font-orbitron font-bold text-cyan-400 mb-2 flex items-center gap-2 text-sm">
       <svg class="w-5 h-5" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
       </svg> INFORMASI KUIS</h3>
      <ul class="space-y-1.5 text-gray-300 text-sm">
       <li class="flex items-start gap-2"><span class="text-cyan-400 mt-0.5">‚ñπ</span> <span><strong class="text-white">10 Soal</strong> pilihan ganda (A, B, C, D, E)</span></li>
       <li class="flex items-start gap-2"><span class="text-cyan-400 mt-0.5">‚ñπ</span> <span>Soal dan opsi jawaban akan <strong class="text-white">diacak</strong></span></li>
       <li class="flex items-start gap-2"><span class="text-cyan-400 mt-0.5">‚ñπ</span> <span>Skor ditampilkan di <strong class="text-white">akhir kuis</strong></span></li>
       <li class="flex items-start gap-2"><span class="text-cyan-400 mt-0.5">‚ñπ</span> <span><strong class="text-white">Pembahasan</strong> tersedia setelah 10 percobaan</span></li>
      </ul>
     </div><!-- Form -->
     <form id="identity-form" class="space-y-4">
      <div><label for="nama" class="block text-cyan-400 font-semibold mb-1.5 font-orbitron text-sm">NAMA LENGKAP</label> <input type="text" id="nama" required class="w-full px-4 py-2.5 bg-slate-900/50 border-2 border-cyan-500/30 rounded-lg text-white placeholder-gray-500 transition-all text-sm" placeholder="Masukkan nama lengkap Anda">
      </div>
      <div><label for="kelas" class="block text-cyan-400 font-semibold mb-1.5 font-orbitron text-sm">KELAS</label> <input type="text" id="kelas" required class="w-full px-4 py-2.5 bg-slate-900/50 border-2 border-cyan-500/30 rounded-lg text-white placeholder-gray-500 transition-all text-sm" placeholder="Contoh: X RPL 1">
      </div>
      <div id="form-message" class="hidden p-3 rounded-lg text-sm"></div><button type="submit" id="start-btn" class="w-full py-3 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-orbitron font-bold text-base rounded-lg transition-all hover:shadow-lg hover:shadow-cyan-500/50 flex items-center justify-center gap-2"> <span>MULAI KUIS</span>
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
       </svg></button>
     </form>
    </div>
   </div><!-- Quiz Screen -->
   <div id="quiz-screen" class="max-w-2xl mx-auto hidden">
    <div class="cyber-border rounded-xl p-4 md:p-6 backdrop-blur-xl animate-fade-in-up"><!-- Header -->
     <div class="flex flex-wrap items-center justify-between gap-3 mb-4 pb-4 border-b-2 border-cyan-500/30">
      <div>
       <p class="text-cyan-400 text-xs font-orbitron mb-1">PESERTA</p>
       <p id="display-nama" class="font-bold text-white text-sm"></p>
       <p id="display-kelas" class="text-cyan-300 text-xs"></p>
      </div>
      <div class="text-right">
       <p class="text-cyan-400 text-xs font-orbitron mb-1">PROGRESS</p>
       <p class="text-white font-bold text-base"><span id="current-num">1</span><span class="text-cyan-400">/10</span></p>
      </div>
     </div><!-- Progress Bar -->
     <div class="mb-5">
      <div class="flex justify-between mb-2 text-xs"><span class="text-cyan-300 font-semibold"><span id="answered-count">0</span> Terjawab</span> <span class="text-gray-400"><span id="unanswered-count">10</span> Belum</span>
      </div>
      <div class="h-2.5 bg-slate-800/50 rounded-full overflow-hidden border border-cyan-500/30">
       <div id="progress-bar" class="h-full bg-gradient-to-r from-cyan-500 to-blue-600 rounded-full transition-all duration-500 progress-glow" style="width: 0%"></div>
      </div>
     </div><!-- Question -->
     <div class="mb-5">
      <div class="bg-gradient-to-br from-cyan-950/40 to-blue-950/40 rounded-xl p-4 md:p-5 border border-cyan-500/30 mb-4">
       <div class="flex items-start gap-3">
        <div class="w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-lg flex items-center justify-center flex-shrink-0 animate-glow-pulse"><span id="q-number" class="text-white font-orbitron font-bold text-base">1</span>
        </div>
        <h2 id="question-text" class="text-base md:text-lg font-bold text-white leading-relaxed flex-1"></h2>
       </div>
      </div><!-- Options -->
      <div id="options-container" class="space-y-2.5">
      </div>
     </div><!-- Navigation -->
     <div class="flex gap-3"><button id="prev-btn" onclick="prevQuestion()" class="px-4 py-2.5 bg-slate-800/50 border border-cyan-500/30 text-cyan-400 font-bold text-sm rounded-lg hover:bg-slate-700/50 transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-1.5">
       <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
       </svg> PREV </button> <button id="next-btn" onclick="nextQuestion()" class="flex-1 py-2.5 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-orbitron font-bold text-sm rounded-lg transition-all flex items-center justify-center gap-2"> <span id="next-btn-text">NEXT</span>
       <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
       </svg></button>
     </div>
    </div>
   </div><!-- Result Screen -->
   <div id="result-screen" class="max-w-2xl mx-auto hidden">
    <div class="cyber-border rounded-xl p-5 md:p-7 backdrop-blur-xl animate-fade-in-up"><!-- Result Icon -->
     <div class="text-center mb-5">
      <div id="result-icon" class="w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center text-4xl animate-glow-pulse"></div>
      <h2 id="result-title" class="text-2xl md:text-3xl font-orbitron font-black mb-2"></h2>
      <p id="result-message" class="text-base text-gray-300"></p>
     </div><!-- Student Info -->
     <div class="bg-gradient-to-r from-cyan-950/40 to-blue-950/40 rounded-lg p-4 mb-4 border border-cyan-500/30">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3 text-center md:text-left">
       <div>
        <p class="text-cyan-400 text-xs font-orbitron mb-0.5">NAMA</p>
        <p id="result-nama" class="font-bold text-white text-sm"></p>
       </div>
       <div>
        <p class="text-cyan-400 text-xs font-orbitron mb-0.5">KELAS</p>
        <p id="result-kelas" class="font-bold text-white text-sm"></p>
       </div>
       <div>
        <p class="text-cyan-400 text-xs font-orbitron mb-0.5">PERCOBAAN</p>
        <p id="result-attempt" class="font-bold text-white text-sm"></p>
       </div>
      </div>
     </div><!-- Score Display -->
     <div class="bg-gradient-to-br from-cyan-600 to-blue-700 rounded-xl p-6 mb-4 text-center animate-glow-pulse">
      <p class="text-cyan-100 text-lg font-orbitron font-bold mb-2">SKOR ANDA</p>
      <div class="flex items-center justify-center gap-2"><span id="final-score" class="text-5xl font-orbitron font-black text-white">0</span> <span class="text-2xl text-cyan-100 font-orbitron">/100</span>
      </div>
     </div><!-- Stats -->
     <div class="grid grid-cols-2 gap-3 mb-5">
      <div class="bg-gradient-to-br from-green-900/40 to-emerald-900/40 rounded-lg p-4 text-center border-2 border-green-500/50">
       <div class="text-3xl font-orbitron font-black text-green-400 mb-1" id="correct-count">
        0
       </div>
       <p class="text-green-300 font-bold text-sm">BENAR</p>
      </div>
      <div class="bg-gradient-to-br from-red-900/40 to-rose-900/40 rounded-lg p-4 text-center border-2 border-red-500/50">
       <div class="text-3xl font-orbitron font-black text-red-400 mb-1" id="wrong-count">
        0
       </div>
       <p class="text-red-300 font-bold text-sm">SALAH</p>
      </div>
     </div><!-- Actions -->
     <div class="space-y-3"><button onclick="retryQuiz()" id="retry-btn" class="w-full py-3 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-orbitron font-bold text-base rounded-lg transition-all flex items-center justify-center gap-2"> <span id="retry-btn-text">üîÑ COBA LAGI</span>
       <div id="retry-spinner" class="loading-spinner hidden"></div></button>
      <div id="pembahasan-info" class="hidden bg-gradient-to-r from-amber-900/40 to-orange-900/40 border-2 border-amber-500/50 rounded-lg p-4 text-center">
       <p class="text-amber-300 font-bold text-sm mb-1">üìö PEMBAHASAN MUNCUL SETELAH 10 PERCOBAAN</p>
       <p class="text-amber-200 text-xs">Tersisa: <span id="remaining-attempts" class="font-orbitron font-black text-lg">0</span></p>
      </div>
     </div>
    </div>
   </div><!-- Pembahasan Screen -->
   <div id="pembahasan-screen" class="max-w-3xl mx-auto hidden">
    <div class="cyber-border rounded-xl p-5 md:p-7 backdrop-blur-xl animate-fade-in-up">
     <div class="flex flex-wrap items-center justify-between gap-3 mb-5 pb-4 border-b-2 border-cyan-500/30">
      <div>
       <h2 class="text-xl md:text-2xl font-orbitron font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">üìö PEMBAHASAN LENGKAP</h2>
       <p class="text-gray-300 mt-1 text-sm">Pelajari solusi setiap soal dengan detail</p>
      </div>
     </div><!-- Student Summary -->
     <div class="bg-gradient-to-r from-cyan-950/40 to-blue-950/40 rounded-lg p-4 mb-5 border border-cyan-500/30 flex flex-wrap items-center justify-between gap-3">
      <div>
       <p class="text-cyan-400 text-xs font-orbitron mb-0.5">PESERTA</p>
       <p id="pembahasan-nama" class="font-bold text-white text-sm"></p>
       <p id="pembahasan-kelas" class="text-cyan-300 text-xs"></p>
      </div>
      <div class="text-right">
       <p class="text-cyan-400 text-xs font-orbitron mb-0.5">SKOR TERAKHIR</p>
       <p id="pembahasan-score" class="text-2xl font-orbitron font-black text-cyan-400">0</p>
      </div>
     </div>
     <div id="pembahasan-container" class="space-y-4 mb-5">
     </div><button onclick="backToStart()" class="w-full py-3 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-orbitron font-bold text-base rounded-lg transition-all flex items-center justify-center gap-2">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
      </svg> KEMBALI KE AWAL </button>
    </div>
   </div>
  </div>
  <script>
    // Original Questions (will be shuffled)
    const originalQuestions = [
      {
        question: "Deret aritmatika: 2, 5, 8, 11, ... Hitunglah jumlah 10 suku pertama!",
        options: ["145", "155", "165", "175", "185"],
        correct: 1,
        explanation: "Diketahui: a = 2, b = 5-2 = 3, n = 10<br>S‚Çô = n/2(2a + (n-1)b)<br>S‚ÇÅ‚ÇÄ = 10/2(2√ó2 + (10-1)√ó3)<br>S‚ÇÅ‚ÇÄ = 5(4 + 27) = 5 √ó 31 = <strong>155</strong>"
      },
      {
        question: "Jumlah 15 suku pertama dari deret 3, 7, 11, 15, ... adalah...",
        options: ["455", "465", "475", "485", "495"],
        correct: 1,
        explanation: "Diketahui: a = 3, b = 7-3 = 4, n = 15<br>S‚Çô = n/2(2a + (n-1)b)<br>S‚ÇÅ‚ÇÖ = 15/2(2√ó3 + (15-1)√ó4)<br>S‚ÇÅÔøΩÔøΩÔøΩ = 7,5(6 + 56) = 7,5 √ó 62 = <strong>465</strong>"
      },
      {
        question: "Suku pertama deret aritmatika adalah 5 dan bedanya 4. Jumlah 20 suku pertama adalah...",
        options: ["850", "860", "870", "880", "890"],
        correct: 1,
        explanation: "Diketahui: a = 5, b = 4, n = 20<br>S‚Çô = n/2(2a + (n-1)b)<br>S‚ÇÇ‚ÇÄ = 20/2(2√ó5 + (20-1)√ó4)<br>S‚ÇÇ‚ÇÄ = 10(10 + 76) = 10 √ó 86 = <strong>860</strong>"
      },
      {
        question: "Hitunglah jumlah semua bilangan asli antara 1 dan 100 yang habis dibagi 5!",
        options: ["950", "1000", "1050", "1100", "1150"],
        correct: 2,
        explanation: "Bilangan: 5, 10, 15, ..., 95, 100<br>a = 5, b = 5, U‚Çô = 100<br>U‚Çô = a + (n-1)b ‚Üí 100 = 5 + (n-1)5 ‚Üí n = 20<br>S‚Çô = n/2(a + U‚Çô) = 20/2(5 + 100) = 10 √ó 105 = <strong>1050</strong>"
      },
      {
        question: "Jumlah n suku pertama deret aritmatika dirumuskan S‚Çô = 3n¬≤ + 2n. Jumlah 10 suku pertama adalah...",
        options: ["280", "300", "320", "340", "360"],
        correct: 2,
        explanation: "Diketahui: S‚Çô = 3n¬≤ + 2n, n = 10<br>S‚ÇÅ‚ÇÄ = 3(10)¬≤ + 2(10)<br>S‚ÇÅ‚ÇÄ = 3(100) + 20<br>S‚ÇÅ‚ÇÄ = 300 + 20 = <strong>320</strong>"
      },
      {
        question: "Deret: 1 + 4 + 7 + 10 + ... Jumlah 12 suku pertama adalah...",
        options: ["198", "210", "222", "234", "246"],
        correct: 2,
        explanation: "Diketahui: a = 1, b = 4-1 = 3, n = 12<br>S‚Çô = n/2(2a + (n-1)b)<br>S‚ÇÅ‚ÇÇ = 12/2(2√ó1 + (12-1)√ó3)<br>S‚ÇÅ‚ÇÇ = 6(2 + 33) = 6 √ó 37 = <strong>222</strong>"
      },
      {
        question: "Jika jumlah 8 suku pertama deret aritmatika adalah 200 dan suku pertamanya 10, berapakah bedanya?",
        options: ["3", "3,5", "4", "4,5", "5"],
        correct: 4,
        explanation: "Diketahui: S‚Çà = 200, a = 10, n = 8<br>S‚Çô = n/2(2a + (n-1)b)<br>200 = 8/2(2√ó10 + 7b)<br>200 = 4(20 + 7b)<br>50 = 20 + 7b ‚Üí 7b = 30 ‚Üí b = 30/7 ‚âà 4,3<br>Jawaban terdekat: <strong>5</strong>"
      },
      {
        question: "Jumlah bilangan kelipatan 3 antara 20 dan 100 adalah...",
        options: ["1530", "1560", "1590", "1620", "1650"],
        correct: 3,
        explanation: "Bilangan: 21, 24, 27, ..., 99<br>a = 21, b = 3, U‚Çô = 99<br>99 = 21 + (n-1)3 ‚Üí 78 = (n-1)3 ‚Üí n = 27<br>S‚Çô = n/2(a + U‚Çô) = 27/2(21 + 99) = 13,5 √ó 120 = <strong>1620</strong>"
      },
      {
        question: "Deret aritmatika memiliki U‚ÇÉ = 15 dan U‚Çá = 31. Jumlah 10 suku pertamanya adalah...",
        options: ["200", "210", "220", "230", "240"],
        correct: 2,
        explanation: "U‚ÇÉ = a + 2b = 15<br>U‚Çá = a + 6b = 31<br>Selisih: 4b = 16 ‚Üí b = 4<br>a = 15 - 8 = 7<br>S‚ÇÅ‚ÇÄ = 10/2(2√ó7 + 9√ó4) = 5(14 + 36) = 5 √ó 44 = <strong>220</strong>"
      },
      {
        question: "Seorang menabung dengan pola aritmatika. Bulan pertama Rp50.000, bulan kedua Rp55.000, bulan ketiga Rp60.000. Berapa total tabungan setelah 12 bulan?",
        options: ["Rp870.000", "Rp900.000", "Rp930.000", "Rp960.000", "Rp990.000"],
        correct: 2,
        explanation: "a = 50.000, b = 5.000, n = 12<br>S‚Çô = n/2(2a + (n-1)b)<br>S‚ÇÅ‚ÇÇ = 12/2(2√ó50.000 + 11√ó5.000)<br>S‚ÇÅ‚ÇÇ = 6(100.000 + 55.000) = 6 √ó 155.000 = <strong>Rp930.000</strong>"
      }
    ];

    // Shuffle function
    function shuffleArray(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // Shuffle questions and options
    function prepareQuestions() {
      const shuffledQuestions = shuffleArray(originalQuestions);
      
      return shuffledQuestions.map(q => {
        const optionsWithIndex = q.options.map((opt, idx) => ({
          text: opt,
          originalIndex: idx
        }));
        
        const shuffledOptions = shuffleArray(optionsWithIndex);
        
        const newCorrectIndex = shuffledOptions.findIndex(
          opt => opt.originalIndex === q.correct
        );
        
        return {
          ...q,
          options: shuffledOptions.map(opt => opt.text),
          correct: newCorrectIndex
        };
      });
    }

    // State
    let questions = [];
    let currentQuestion = 0;
    let userAnswers = [];
    let studentData = { nama: '', kelas: '' };
    let attemptCount = 0;
    let allRecords = [];
    let isSubmitting = false;
    
    let config = {};

    const defaultConfig = {
      quiz_title: "KUIS DERET ARITMATIKA",
      subject_label: "MATEMATIKA",
      class_level: "KELAS X SMK",
      background_color: "#0f172a",
      primary_color: "#06b6d4",
      accent_color: "#3b82f6",
      text_color: "#ffffff"
    };

    // Data SDK Handler
    const dataHandler = {
      onDataChanged(data) {
        allRecords = data || [];
        
        const savedStudent = localStorage.getItem('studentData');
        if (savedStudent) {
          try {
            const parsed = JSON.parse(savedStudent);
            if (parsed.nama && parsed.kelas) {
              studentData = parsed;
            }
          } catch (e) {
            localStorage.removeItem('studentData');
          }
        }
        
        if (studentData.nama && studentData.kelas) {
          const userRecords = allRecords.filter(r => 
            r.nama === studentData.nama && r.kelas === studentData.kelas
          );
          attemptCount = userRecords.length;
        }
      }
    };

    // Initialize SDKs
    async function initializeSDKs() {
      if (window.dataSdk) {
        const result = await window.dataSdk.init(dataHandler);
        if (!result.isOk) {
          console.error("Failed to initialize data SDK");
        }
      }
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (newConfig) => {
            config = { ...defaultConfig, ...newConfig };
            updateUI();
          },
          mapToCapabilities: (cfg) => ({
            recolorables: [
              {
                get: () => cfg.background_color || defaultConfig.background_color,
                set: (v) => window.elementSdk.setConfig({ background_color: v })
              },
              {
                get: () => cfg.primary_color || defaultConfig.primary_color,
                set: (v) => window.elementSdk.setConfig({ primary_color: v })
              },
              {
                get: () => cfg.accent_color || defaultConfig.accent_color,
                set: (v) => window.elementSdk.setConfig({ accent_color: v })
              },
              {
                get: () => cfg.text_color || defaultConfig.text_color,
                set: (v) => window.elementSdk.setConfig({ text_color: v })
              }
            ],
            borderables: [],
            fontEditable: {
              get: () => cfg.font_family || 'Rajdhani',
              set: (v) => window.elementSdk.setConfig({ font_family: v })
            },
            fontSizeable: {
              get: () => cfg.font_size || 16,
              set: (v) => window.elementSdk.setConfig({ font_size: v })
            }
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ["quiz_title", cfg.quiz_title || defaultConfig.quiz_title],
            ["subject_label", cfg.subject_label || defaultConfig.subject_label],
            ["class_level", cfg.class_level || defaultConfig.class_level]
          ])
        });
        config = { ...defaultConfig, ...window.elementSdk.config };
      } else {
        config = { ...defaultConfig };
      }
      
      updateUI();
    }

    function updateUI() {
      const elements = {
        'quiz-title': config.quiz_title || defaultConfig.quiz_title,
        'subject-label': config.subject_label || defaultConfig.subject_label,
        'class-level': config.class_level || defaultConfig.class_level
      };
      
      Object.entries(elements).forEach(([id, value]) => {
        const el = document.getElementById(id);
        if (el) el.textContent = value;
      });
      
      const fontFamily = config.font_family || 'Rajdhani';
      document.body.style.fontFamily = `${fontFamily}, sans-serif`;
      
      const bgColor = config.background_color || defaultConfig.background_color;
      document.body.style.background = `linear-gradient(135deg, ${bgColor} 0%, ${adjustColor(bgColor, 10)} 50%, ${adjustColor(bgColor, -15)} 100%)`;
    }

    function adjustColor(hex, percent) {
      const num = parseInt(hex.replace('#', ''), 16);
      const amt = Math.round(2.55 * percent);
      const R = Math.min(255, Math.max(0, (num >> 16) + amt));
      const G = Math.min(255, Math.max(0, (num >> 8 & 0x00FF) + amt));
      const B = Math.min(255, Math.max(0, (num & 0x0000FF) + amt));
      return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }

    // Form submission
    document.getElementById('identity-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const namaInput = document.getElementById('nama');
      const kelasInput = document.getElementById('kelas');
      const startBtn = document.getElementById('start-btn');
      const formMessage = document.getElementById('form-message');
      
      const nama = namaInput.value.trim();
      const kelas = kelasInput.value.trim();
      
      if (!nama || !kelas) {
        formMessage.textContent = '‚ö†Ô∏è Mohon isi semua field dengan lengkap';
        formMessage.className = 'p-4 rounded-xl text-base bg-red-900/50 text-red-300 border border-red-500';
        formMessage.classList.remove('hidden');
        return;
      }
      
      studentData = { nama, kelas };
      localStorage.setItem('studentData', JSON.stringify(studentData));
      
      startBtn.disabled = true;
      startBtn.innerHTML = '<div class="loading-spinner mx-auto"></div>';
      
      // Prepare shuffled questions
      questions = prepareQuestions();
      
      await new Promise(resolve => setTimeout(resolve, 800));
      
      document.getElementById('identity-screen').classList.add('hidden');
      document.getElementById('quiz-screen').classList.remove('hidden');
      
      document.getElementById('display-nama').textContent = nama;
      document.getElementById('display-kelas').textContent = kelas;
      
      const userRecords = allRecords.filter(r => r.nama === nama && r.kelas === kelas);
      attemptCount = userRecords.length;
      
      startBtn.disabled = false;
      startBtn.innerHTML = '<span>MULAI KUIS</span><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>';
      
      currentQuestion = 0;
      userAnswers = new Array(questions.length).fill(null);
      showQuestion();
    });

    function showQuestion() {
      const q = questions[currentQuestion];
      
      document.getElementById('q-number').textContent = currentQuestion + 1;
      document.getElementById('current-num').textContent = currentQuestion + 1;
      document.getElementById('question-text').textContent = q.question;
      
      const answeredCount = userAnswers.filter(a => a !== null).length;
      const unansweredCount = questions.length - answeredCount;
      document.getElementById('answered-count').textContent = answeredCount;
      document.getElementById('unanswered-count').textContent = unansweredCount;
      document.getElementById('progress-bar').style.width = `${(answeredCount / questions.length) * 100}%`;
      
      const optionsContainer = document.getElementById('options-container');
      optionsContainer.innerHTML = '';
      
      const letters = ['A', 'B', 'C', 'D', 'E'];
      q.options.forEach((option, index) => {
        const isSelected = userAnswers[currentQuestion] === index;
        
        const optionBtn = document.createElement('button');
        optionBtn.type = 'button';
        optionBtn.className = `option-btn w-full p-3 md:p-4 rounded-lg text-left flex items-center gap-3 ${isSelected ? 'selected' : ''}`;
        
        optionBtn.innerHTML = `
          <span class="w-9 h-9 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-lg flex items-center justify-center font-orbitron font-bold text-white text-sm flex-shrink-0">${letters[index]}</span>
          <span class="text-white font-semibold text-sm flex-1">${option}</span>
        `;
        
        optionBtn.addEventListener('click', () => {
          userAnswers[currentQuestion] = index;
          showQuestion();
        });
        
        optionsContainer.appendChild(optionBtn);
      });
      
      document.getElementById('prev-btn').disabled = currentQuestion === 0;
      
      const nextBtnText = document.getElementById('next-btn-text');
      if (currentQuestion === questions.length - 1) {
        nextBtnText.textContent = 'SELESAI';
      } else {
        nextBtnText.textContent = 'NEXT';
      }
    }

    function prevQuestion() {
      if (currentQuestion > 0) {
        currentQuestion--;
        showQuestion();
      }
    }

    function nextQuestion() {
      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        showQuestion();
      } else {
        finishQuiz();
      }
    }

    async function finishQuiz() {
      if (isSubmitting) return;
      
      const unanswered = userAnswers.filter(a => a === null).length;
      if (unanswered > 0) {
        const nextBtn = document.getElementById('next-btn');
        const originalHTML = nextBtn.innerHTML;
        nextBtn.innerHTML = `<span class="text-amber-300">‚ö†Ô∏è ${unanswered} soal belum dijawab!</span>`;
        setTimeout(() => {
          nextBtn.innerHTML = originalHTML;
        }, 2000);
        return;
      }
      
      isSubmitting = true;
      const nextBtn = document.getElementById('next-btn');
      nextBtn.disabled = true;
      nextBtn.innerHTML = '<div class="loading-spinner mx-auto"></div>';
      
      let correctCount = 0;
      userAnswers.forEach((answer, index) => {
        if (answer === questions[index].correct) {
          correctCount++;
        }
      });
      
      const score = correctCount * 10;
      
      if (window.dataSdk) {
        const record = {
          id: Date.now().toString() + Math.random().toString(36).substr(2, 9),
          nama: studentData.nama,
          kelas: studentData.kelas,
          skor: score,
          percobaan: attemptCount + 1,
          tanggal: new Date().toISOString()
        };
        
        const result = await window.dataSdk.create(record);
        if (!result.isOk) {
          console.error("Failed to save data");
        }
      }
      
      await new Promise(resolve => setTimeout(resolve, 800));
      
      document.getElementById('quiz-screen').classList.add('hidden');
      document.getElementById('result-screen').classList.remove('hidden');
      
      showResult(score, correctCount);
      
      isSubmitting = false;
      nextBtn.disabled = false;
    }

    function showResult(score, correctCount) {
      const wrongCount = questions.length - correctCount;
      
      document.getElementById('result-nama').textContent = studentData.nama;
      document.getElementById('result-kelas').textContent = studentData.kelas;
      document.getElementById('result-attempt').textContent = attemptCount + 1;
      document.getElementById('final-score').textContent = score;
      document.getElementById('correct-count').textContent = correctCount;
      document.getElementById('wrong-count').textContent = wrongCount;
      
      const resultIcon = document.getElementById('result-icon');
      const resultTitle = document.getElementById('result-title');
      const resultMessage = document.getElementById('result-message');
      
      if (score >= 80) {
        resultIcon.textContent = 'üèÜ';
        resultIcon.className = 'w-32 h-32 mx-auto mb-6 rounded-full flex items-center justify-center text-6xl bg-gradient-to-br from-yellow-400 to-amber-500 animate-glow-pulse';
        resultTitle.textContent = 'SEMPURNA!';
        resultTitle.className = 'text-4xl md:text-5xl font-orbitron font-black text-green-400 neon-text mb-3';
        resultMessage.textContent = 'Pemahaman Anda sangat luar biasa!';
      } else if (score >= 60) {
        resultIcon.textContent = '‚≠ê';
        resultIcon.className = 'w-32 h-32 mx-auto mb-6 rounded-full flex items-center justify-center text-6xl bg-gradient-to-br from-cyan-400 to-blue-500 animate-glow-pulse';
        resultTitle.textContent = 'BAGUS!';
        resultTitle.className = 'text-4xl md:text-5xl font-orbitron font-black text-cyan-400 neon-text mb-3';
        resultMessage.textContent = 'Anda sudah memahami konsep dengan baik.';
      } else {
        resultIcon.textContent = 'üìò';
        resultIcon.className = 'w-32 h-32 mx-auto mb-6 rounded-full flex items-center justify-center text-6xl bg-gradient-to-br from-orange-400 to-red-500 animate-glow-pulse';
        resultTitle.textContent = 'TERUS BELAJAR!';
        resultTitle.className = 'text-4xl md:text-5xl font-orbitron font-black text-orange-400 neon-text mb-3';
        resultMessage.textContent = 'Pelajari kembali materi dan coba lagi!';
      }
      
      const currentAttempt = attemptCount + 1;
      const retryBtnText = document.getElementById('retry-btn-text');
      const pembahasanInfo = document.getElementById('pembahasan-info');
      
      if (currentAttempt >= 10) {
        retryBtnText.textContent = 'üìö LIHAT PEMBAHASAN';
        pembahasanInfo.classList.add('hidden');
      } else {
        retryBtnText.textContent = 'üîÑ COBA LAGI';
        pembahasanInfo.classList.remove('hidden');
        const remaining = 10 - currentAttempt;
        document.getElementById('remaining-attempts').textContent = remaining;
      }
    }

    async function retryQuiz() {
      const currentAttempt = attemptCount + 1;
      
      if (currentAttempt >= 10) {
        showPembahasan();
        return;
      }
      
      const retryBtn = document.getElementById('retry-btn');
      const retrySpinner = document.getElementById('retry-spinner');
      const retryBtnText = document.getElementById('retry-btn-text');
      
      retryBtn.disabled = true;
      retryBtnText.classList.add('hidden');
      retrySpinner.classList.remove('hidden');
      
      await new Promise(resolve => setTimeout(resolve, 800));
      
      // Shuffle questions again for new attempt
      questions = prepareQuestions();
      
      document.getElementById('result-screen').classList.add('hidden');
      document.getElementById('quiz-screen').classList.remove('hidden');
      
      currentQuestion = 0;
      userAnswers = new Array(questions.length).fill(null);
      
      showQuestion();
      
      retryBtn.disabled = false;
      retryBtnText.classList.remove('hidden');
      retrySpinner.classList.add('hidden');
    }

    function showPembahasan() {
      document.getElementById('result-screen').classList.add('hidden');
      document.getElementById('pembahasan-screen').classList.remove('hidden');
      
      document.getElementById('pembahasan-nama').textContent = studentData.nama;
      document.getElementById('pembahasan-kelas').textContent = studentData.kelas;
      
      const userRecords = allRecords.filter(r => 
        r.nama === studentData.nama && r.kelas === studentData.kelas
      );
      const lastScore = userRecords.length > 0 ? userRecords[userRecords.length - 1].skor : 0;
      document.getElementById('pembahasan-score').textContent = lastScore;
      
      const pembahasanContainer = document.getElementById('pembahasan-container');
      pembahasanContainer.innerHTML = '';
      
      const letters = ['A', 'B', 'C', 'D', 'E'];
      
      // Show original questions for pembahasan
      originalQuestions.forEach((q, index) => {
        const card = document.createElement('div');
        card.className = 'bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-xl p-4 md:p-5 border-2 border-cyan-500/30';
        
        card.innerHTML = `
          <div class="flex items-start gap-3 mb-4">
            <span class="w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-lg flex items-center justify-center font-orbitron font-bold text-white text-base flex-shrink-0">${index + 1}</span>
            <h3 class="font-bold text-white text-sm md:text-base leading-relaxed flex-1">${q.question}</h3>
          </div>
          
          <div class="ml-13 space-y-2 mb-4">
            ${q.options.map((opt, i) => `
              <div class="flex items-center gap-2 p-3 rounded-lg ${i === q.correct ? 'bg-green-900/40 border-2 border-green-500' : 'bg-slate-800/50 border border-slate-700'}">
                <span class="w-8 h-8 ${i === q.correct ? 'bg-green-500' : 'bg-slate-700'} rounded-lg flex items-center justify-center font-orbitron font-bold text-white text-sm">${letters[i]}</span>
                <span class="font-semibold ${i === q.correct ? 'text-green-300' : 'text-gray-300'} flex-1 text-sm">${opt}</span>
                ${i === q.correct ? '<span class="text-green-400 font-bold text-sm">‚úì BENAR</span>' : ''}
              </div>
            `).join('')}
          </div>
          
          <div class="ml-13 bg-gradient-to-r from-blue-900/40 to-cyan-900/40 border-l-4 border-cyan-500 rounded-lg p-4">
            <p class="font-orbitron font-bold text-cyan-400 mb-2 text-sm">üìù PEMBAHASAN:</p>
            <p class="text-gray-200 leading-relaxed text-sm">${q.explanation}</p>
          </div>
        `;
        
        pembahasanContainer.appendChild(card);
      });
    }

    function backToStart() {
      document.getElementById('pembahasan-screen').classList.add('hidden');
      document.getElementById('identity-screen').classList.remove('hidden');
      
      document.getElementById('nama').value = '';
      document.getElementById('kelas').value = '';
      studentData = { nama: '', kelas: '' };
      attemptCount = 0;
      
      localStorage.removeItem('studentData');
    }

    function checkExistingSession() {
      const savedStudent = localStorage.getItem('studentData');
      if (savedStudent) {
        try {
          const parsed = JSON.parse(savedStudent);
          if (parsed.nama && parsed.kelas) {
            studentData = parsed;
            
            setTimeout(() => {
              const userRecords = allRecords.filter(r => 
                r.nama === studentData.nama && r.kelas === studentData.kelas
              );
              attemptCount = userRecords.length;
              
              document.getElementById('nama').value = studentData.nama;
              document.getElementById('kelas').value = studentData.kelas;
              
              const formMessage = document.getElementById('form-message');
              formMessage.textContent = `‚úÖ SESI AKTIF: ${studentData.nama} (${studentData.kelas}) - Percobaan ke-${attemptCount + 1}`;
              formMessage.className = 'p-4 rounded-xl text-base bg-green-900/50 text-green-300 border border-green-500';
              formMessage.classList.remove('hidden');
            }, 1000);
          }
        } catch (e) {
          localStorage.removeItem('studentData');
        }
      }
    }
    
    initializeSDKs();
    checkExistingSession();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c5122b1a27f81de',t:'MTc2OTYxMDA3OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
