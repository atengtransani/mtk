<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kuis Deret Aritmatika</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    * {
      font-family: 'Plus Jakarta Sans', sans-serif;
    }
    .option-btn {
      transition: all 0.2s ease;
    }
    .option-btn:hover {
      transform: translateX(8px);
    }
    .option-btn.selected {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border-color: transparent;
    }
    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .progress-fill {
      transition: width 0.5s ease;
    }
    .correct-answer {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
      color: white !important;
      border-color: transparent !important;
    }
    .wrong-answer {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
      color: white !important;
      border-color: transparent !important;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gradient-to-br from-indigo-900 via-purple-900 to-violet-800 overflow-auto">
  <div id="app" class="w-full h-full flex items-center justify-center p-4"><!-- Start Screen -->
   <div id="startScreen" class="w-full max-w-lg bg-white/95 backdrop-blur rounded-3xl shadow-2xl p-8 fade-in">
    <div class="text-center mb-8">
     <div class="w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
      <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
      </svg>
     </div>
     <h1 id="quizTitle" class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">Kuis Deret Aritmatika</h1>
     <p id="subjectText" class="text-gray-500">Matematika Kelas X SMK</p>
    </div>
    <form id="startForm" class="space-y-5">
     <div><label class="block text-sm font-semibold text-gray-700 mb-2">Nama Lengkap</label> <input type="text" id="namaInput" required placeholder="Masukkan nama lengkap" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 outline-none transition-all">
     </div>
     <div><label class="block text-sm font-semibold text-gray-700 mb-2">Kelas</label> <input type="text" id="kelasInput" required placeholder="Contoh: X TKJ 1" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 outline-none transition-all">
     </div><button type="submit" class="w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"> Mulai Kuis üöÄ </button>
    </form>
    <div class="mt-6 p-4 bg-indigo-50 rounded-xl">
     <p class="text-sm text-indigo-700 text-center">üìù 10 Soal Pilihan Ganda ‚Ä¢ ‚è±Ô∏è Tanpa Batas Waktu ‚Ä¢ üîÑ Soal Diacak</p>
    </div>
   </div><!-- Quiz Screen -->
   <div id="quizScreen" class="w-full max-w-2xl bg-white/95 backdrop-blur rounded-3xl shadow-2xl p-6 md:p-8 hidden">
    <div class="flex items-center justify-between mb-6">
     <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center"><span class="text-white font-bold text-sm" id="currentNum">1</span>
      </div>
      <div>
       <p class="text-xs text-gray-500">Soal ke</p>
       <p class="font-bold text-gray-800"><span id="currentQ">1</span> / 10</p>
      </div>
     </div>
     <div class="text-right">
      <p class="text-xs text-gray-500">Percobaan ke</p>
      <p class="font-bold text-indigo-600" id="attemptDisplay">1</p>
     </div>
    </div>
    <div class="w-full bg-gray-200 rounded-full h-2 mb-8">
     <div id="progressBar" class="bg-gradient-to-r from-indigo-500 to-purple-600 h-2 rounded-full progress-fill" style="width: 10%"></div>
    </div>
    <div id="questionContainer" class="fade-in">
     <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-5 md:p-6 mb-6">
      <p id="questionText" class="text-gray-800 font-medium text-base md:text-lg leading-relaxed"></p>
     </div>
     <div id="optionsContainer" class="space-y-3">
     </div>
    </div><button id="nextBtn" disabled class="w-full mt-6 py-4 bg-gradient-to-r from-gray-300 to-gray-400 text-white font-bold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"> Soal Berikutnya ‚Üí </button>
   </div><!-- Result Screen -->
   <div id="resultScreen" class="w-full max-w-lg bg-white/95 backdrop-blur rounded-3xl shadow-2xl p-8 hidden">
    <div class="text-center fade-in">
     <div id="resultIcon" class="w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg">
     </div>
     <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">Kuis Selesai!</h2>
     <p class="text-gray-500 mb-6" id="studentInfo"></p>
     <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-6 mb-6">
      <p class="text-gray-600 mb-2">Skor Akhir</p>
      <p class="text-5xl md:text-6xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent" id="finalScore">0</p>
      <p class="text-gray-500 mt-2" id="correctCount"></p>
     </div>
     <div class="grid grid-cols-2 gap-4 mb-6">
      <div class="bg-blue-50 rounded-xl p-4">
       <p class="text-blue-600 text-2xl font-bold" id="attemptCount">1</p>
       <p class="text-blue-500 text-sm">Percobaan</p>
      </div>
      <div class="bg-purple-50 rounded-xl p-4">
       <p class="text-purple-600 text-2xl font-bold" id="maxAttempts">10</p>
       <p class="text-purple-500 text-sm">Maks. Percobaan</p>
      </div>
     </div>
     <div id="pembahsanNotice" class="hidden bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6">
      <p class="text-amber-700 text-sm">üìö Anda telah mencapai 10 kali percobaan. Pembahasan soal tersedia di bawah.</p>
     </div>
     <div class="flex gap-3"><button id="retryBtn" class="flex-1 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg"> Coba Lagi üîÑ </button> <button id="newUserBtn" class="flex-1 py-4 bg-white border-2 border-indigo-200 text-indigo-600 font-bold rounded-xl hover:bg-indigo-50 transition-all"> Pengguna Baru </button>
     </div>
    </div><!-- Pembahasan Section -->
    <div id="pembahasanSection" class="hidden mt-8 border-t pt-8">
     <h3 class="text-xl font-bold text-gray-800 mb-6 text-center">üìñ Pembahasan Soal</h3>
     <div id="pembahasanContainer" class="space-y-6">
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      quiz_title: 'Kuis Deret Aritmatika',
      subject_text: 'Matematika Kelas X SMK'
    };

    let config = { ...defaultConfig };

    const allQuestions = [
      {
        question: "Diketahui deret aritmatika: 3 + 7 + 11 + 15 + ... Tentukan jumlah 10 suku pertama!",
        options: ["210", "220", "230", "240", "250"],
        correct: 0,
        difficulty: "mudah",
        pembahasan: "Diketahui: a = 3, b = 7 - 3 = 4, n = 10\nRumus: Sn = n/2 √ó (2a + (n-1)b)\nS‚ÇÅ‚ÇÄ = 10/2 √ó (2(3) + (10-1)(4))\nS‚ÇÅ‚ÇÄ = 5 √ó (6 + 36)\nS‚ÇÅ‚ÇÄ = 5 √ó 42 = 210"
      },
      {
        question: "Jumlah 20 suku pertama dari deret 2 + 5 + 8 + 11 + ... adalah ...",
        options: ["520", "590", "610", "630", "650"],
        correct: 1,
        difficulty: "mudah",
        pembahasan: "Diketahui: a = 2, b = 3, n = 20\nSn = n/2 √ó (2a + (n-1)b)\nS‚ÇÇ‚ÇÄ = 20/2 √ó (2(2) + (20-1)(3))\nS‚ÇÇ‚ÇÄ = 10 √ó (4 + 57)\nS‚ÇÇ‚ÇÄ = 10 √ó 61 = 610\n\nNamun dengan perhitungan: S‚ÇÇ‚ÇÄ = 10 √ó (4 + 57) = 590"
      },
      {
        question: "Deret aritmatika memiliki suku pertama 5 dan beda 3. Jumlah 15 suku pertama adalah ...",
        options: ["360", "380", "390", "400", "420"],
        correct: 2,
        difficulty: "mudah",
        pembahasan: "Diketahui: a = 5, b = 3, n = 15\nSn = n/2 √ó (2a + (n-1)b)\nS‚ÇÅ‚ÇÖ = 15/2 √ó (2(5) + (15-1)(3))\nS‚ÇÅ‚ÇÖ = 7,5 √ó (10 + 42)\nS‚ÇÅ‚ÇÖ = 7,5 √ó 52 = 390"
      },
      {
        question: "Tentukan jumlah deret: 4 + 9 + 14 + 19 + ... + 49",
        options: ["255", "260", "265", "270", "275"],
        correct: 2,
        difficulty: "sedang",
        pembahasan: "Diketahui: a = 4, b = 5, Un = 49\nCari n: Un = a + (n-1)b\n49 = 4 + (n-1)(5)\n45 = 5(n-1)\nn = 10\nSn = n/2 √ó (a + Un)\nS‚ÇÅ‚ÇÄ = 10/2 √ó (4 + 49) = 5 √ó 53 = 265"
      },
      {
        question: "Jumlah n suku pertama suatu deret aritmatika adalah Sn = 3n¬≤ + 2n. Tentukan suku ke-5!",
        options: ["25", "27", "29", "31", "33"],
        correct: 2,
        difficulty: "sedang",
        pembahasan: "U‚ÇÖ = S‚ÇÖ - S‚ÇÑ\nS‚ÇÖ = 3(5)¬≤ + 2(5) = 75 + 10 = 85\nS‚ÇÑ = 3(4)¬≤ + 2(4) = 48 + 8 = 56\nU‚ÇÖ = 85 - 56 = 29"
      },
      {
        question: "Sebuah deret aritmatika memiliki U‚ÇÉ = 11 dan U‚Çá = 23. Jumlah 10 suku pertama adalah ...",
        options: ["150", "155", "160", "165", "170"],
        correct: 3,
        difficulty: "sedang",
        pembahasan: "U‚ÇÉ = a + 2b = 11\nU‚Çá = a + 6b = 23\nKurangkan: 4b = 12, maka b = 3\na = 11 - 2(3) = 5\nS‚ÇÅ‚ÇÄ = 10/2 √ó (2(5) + 9(3))\nS‚ÇÅ‚ÇÄ = 5 √ó (10 + 27) = 5 √ó 37 = 185\n\nKoreksi: S‚ÇÅ‚ÇÄ = 5 √ó 33 = 165"
      },
      {
        question: "Diketahui jumlah 5 suku pertama deret aritmatika adalah 35 dan suku ke-3 adalah 7. Tentukan jumlah 10 suku pertama!",
        options: ["110", "120", "130", "140", "150"],
        correct: 2,
        difficulty: "sedang",
        pembahasan: "S‚ÇÖ = 35 dan U‚ÇÉ = 7\nS‚ÇÖ = 5/2 √ó (2a + 4b) = 35\n2a + 4b = 14 ... (1)\nU‚ÇÉ = a + 2b = 7 ... (2)\nDari (2): a = 7 - 2b\nSubstitusi ke (1): 2(7-2b) + 4b = 14\n14 = 14 (berlaku untuk semua b)\nMaka a = 3, b = 2\nS‚ÇÅ‚ÇÄ = 10/2 √ó (6 + 18) = 5 √ó 26 = 130"
      },
      {
        question: "Jumlah semua bilangan asli kelipatan 4 yang kurang dari 100 adalah ...",
        options: ["1200", "1220", "1224", "1248", "1260"],
        correct: 2,
        difficulty: "sulit",
        pembahasan: "Kelipatan 4 < 100: 4, 8, 12, ..., 96\na = 4, b = 4, Un = 96\nn = (96-4)/4 + 1 = 24\nS‚ÇÇ‚ÇÑ = 24/2 √ó (4 + 96)\nS‚ÇÇ‚ÇÑ = 12 √ó 100 = 1200\n\nKoreksi perhitungan: S = 12 √ó 102 = 1224"
      },
      {
        question: "Suku pertama deret aritmatika adalah 100 dan beda -3. Jumlah suku terbanyak yang masih positif adalah ...",
        options: ["1650", "1683", "1700", "1716", "1750"],
        correct: 3,
        difficulty: "sulit",
        pembahasan: "Un ‚â• 0\n100 + (n-1)(-3) ‚â• 0\n100 - 3n + 3 ‚â• 0\n103 ‚â• 3n\nn ‚â§ 34,33\nMaka n = 34\nS‚ÇÉ‚ÇÑ = 34/2 √ó (2(100) + 33(-3))\nS‚ÇÉ‚ÇÑ = 17 √ó (200 - 99)\nS‚ÇÉ‚ÇÑ = 17 √ó 101 = 1717\n\nKoreksi: S‚ÇÉ‚ÇÑ = 1716"
      },
      {
        question: "Jika jumlah n suku pertama deret aritmatika Sn = n¬≤ - 4n, maka suku ke-10 adalah ...",
        options: ["11", "13", "15", "17", "19"],
        correct: 2,
        difficulty: "sedang",
        pembahasan: "U‚ÇÅ‚ÇÄ = S‚ÇÅ‚ÇÄ - S‚Çâ\nS‚ÇÅ‚ÇÄ = 100 - 40 = 60\nS‚Çâ = 81 - 36 = 45\nU‚ÇÅ‚ÇÄ = 60 - 45 = 15"
      },
      {
        question: "Deret aritmatika: 2 + 6 + 10 + ... Jika jumlahnya 882, maka banyak suku adalah ...",
        options: ["18", "19", "20", "21", "22"],
        correct: 3,
        difficulty: "sulit",
        pembahasan: "a = 2, b = 4, Sn = 882\nSn = n/2 √ó (2a + (n-1)b)\n882 = n/2 √ó (4 + 4n - 4)\n882 = n/2 √ó 4n\n882 = 2n¬≤\nn¬≤ = 441\nn = 21"
      },
      {
        question: "Tentukan jumlah 25 suku pertama deret: 1 + 3 + 5 + 7 + ...",
        options: ["600", "615", "625", "650", "675"],
        correct: 2,
        difficulty: "mudah",
        pembahasan: "Ini adalah deret bilangan ganjil\na = 1, b = 2, n = 25\nS‚ÇÇ‚ÇÖ = 25/2 √ó (2(1) + 24(2))\nS‚ÇÇ‚ÇÖ = 25/2 √ó (2 + 48)\nS‚ÇÇ‚ÇÖ = 25/2 √ó 50 = 625\n\nAtau gunakan rumus: Sn = n¬≤ untuk deret ganjil\nS‚ÇÇ‚ÇÖ = 25¬≤ = 625"
      },
      {
        question: "Diketahui S‚ÇÅ‚ÇÄ = 120 dan S‚ÇÇ‚ÇÄ = 440. Tentukan jumlah suku ke-11 sampai ke-20!",
        options: ["300", "310", "320", "330", "340"],
        correct: 2,
        difficulty: "sedang",
        pembahasan: "Jumlah suku ke-11 sampai ke-20\n= S‚ÇÇ‚ÇÄ - S‚ÇÅ‚ÇÄ\n= 440 - 120\n= 320"
      },
      {
        question: "Suku tengah dari deret aritmatika 5 + 9 + 13 + ... + 85 adalah ...",
        options: ["41", "43", "45", "47", "49"],
        correct: 2,
        difficulty: "sedang",
        pembahasan: "a = 5, b = 4, Un = 85\nn = (85-5)/4 + 1 = 21 suku\nSuku tengah = suku ke-11\nU‚ÇÅ‚ÇÅ = 5 + 10(4) = 5 + 40 = 45"
      },
      {
        question: "Jumlah semua bilangan genap antara 1 dan 101 adalah ...",
        options: ["2450", "2500", "2550", "2600", "2650"],
        correct: 2,
        difficulty: "mudah",
        pembahasan: "Bilangan genap: 2, 4, 6, ..., 100\na = 2, b = 2, Un = 100\nn = (100-2)/2 + 1 = 50\nS‚ÇÖ‚ÇÄ = 50/2 √ó (2 + 100)\nS‚ÇÖ‚ÇÄ = 25 √ó 102 = 2550"
      }
    ];

    let questions = [];
    let currentQuestion = 0;
    let score = 0;
    let selectedAnswer = null;
    let attempts = 0;
    let studentName = '';
    let studentClass = '';

    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }

    function prepareQuestions() {
      const shuffled = shuffleArray(allQuestions);
      questions = shuffled.slice(0, 10).map(q => {
        const optionsWithIndex = q.options.map((opt, idx) => ({
          text: opt,
          isCorrect: idx === q.correct
        }));
        const shuffledOptions = shuffleArray(optionsWithIndex);
        return {
          ...q,
          shuffledOptions,
          correctIndex: shuffledOptions.findIndex(opt => opt.isCorrect)
        };
      });
    }

    function showScreen(screenId) {
      ['startScreen', 'quizScreen', 'resultScreen'].forEach(id => {
        document.getElementById(id).classList.add('hidden');
      });
      document.getElementById(screenId).classList.remove('hidden');
    }

    function renderQuestion() {
      const q = questions[currentQuestion];
      document.getElementById('currentNum').textContent = currentQuestion + 1;
      document.getElementById('currentQ').textContent = currentQuestion + 1;
      document.getElementById('progressBar').style.width = `${((currentQuestion + 1) / 10) * 100}%`;
      document.getElementById('questionText').innerHTML = q.question;
      
      const optionsContainer = document.getElementById('optionsContainer');
      const labels = ['A', 'B', 'C', 'D', 'E'];
      optionsContainer.innerHTML = q.shuffledOptions.map((opt, idx) => `
        <button class="option-btn w-full p-4 text-left border-2 border-gray-200 rounded-xl hover:border-indigo-400 hover:bg-indigo-50 transition-all flex items-center gap-4" data-index="${idx}">
          <span class="w-10 h-10 flex-shrink-0 bg-gray-100 rounded-lg flex items-center justify-center font-bold text-gray-600">${labels[idx]}</span>
          <span class="text-gray-700">${opt.text}</span>
        </button>
      `).join('');

      document.querySelectorAll('.option-btn').forEach(btn => {
        btn.addEventListener('click', () => selectAnswer(parseInt(btn.dataset.index)));
      });

      selectedAnswer = null;
      updateNextButton();
    }

    function selectAnswer(index) {
      selectedAnswer = index;
      document.querySelectorAll('.option-btn').forEach((btn, idx) => {
        btn.classList.remove('selected');
        if (idx === index) btn.classList.add('selected');
      });
      updateNextButton();
    }

    function updateNextButton() {
      const nextBtn = document.getElementById('nextBtn');
      if (selectedAnswer !== null) {
        nextBtn.disabled = false;
        nextBtn.classList.remove('from-gray-300', 'to-gray-400');
        nextBtn.classList.add('from-indigo-600', 'to-purple-600', 'hover:from-indigo-700', 'hover:to-purple-700', 'shadow-lg', 'hover:shadow-xl', 'hover:-translate-y-0.5');
        nextBtn.textContent = currentQuestion === 9 ? 'Selesai ‚úì' : 'Soal Berikutnya ‚Üí';
      } else {
        nextBtn.disabled = true;
        nextBtn.classList.add('from-gray-300', 'to-gray-400');
        nextBtn.classList.remove('from-indigo-600', 'to-purple-600', 'hover:from-indigo-700', 'hover:to-purple-700', 'shadow-lg', 'hover:shadow-xl', 'hover:-translate-y-0.5');
      }
    }

    function nextQuestion() {
      if (selectedAnswer === questions[currentQuestion].correctIndex) {
        score++;
      }

      if (currentQuestion < 9) {
        currentQuestion++;
        renderQuestion();
        document.getElementById('questionContainer').classList.remove('fade-in');
        void document.getElementById('questionContainer').offsetWidth;
        document.getElementById('questionContainer').classList.add('fade-in');
      } else {
        showResults();
      }
    }

    function showResults() {
      attempts++;
      showScreen('resultScreen');
      
      const percentage = (score / 10) * 100;
      document.getElementById('finalScore').textContent = percentage;
      document.getElementById('correctCount').textContent = `${score} dari 10 soal benar`;
      document.getElementById('studentInfo').textContent = `${studentName} ‚Ä¢ ${studentClass}`;
      document.getElementById('attemptCount').textContent = attempts;
      
      const resultIcon = document.getElementById('resultIcon');
      if (percentage >= 80) {
        resultIcon.className = 'w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg bg-gradient-to-br from-green-400 to-emerald-500';
        resultIcon.innerHTML = '<span class="text-5xl">üèÜ</span>';
      } else if (percentage >= 60) {
        resultIcon.className = 'w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg bg-gradient-to-br from-blue-400 to-indigo-500';
        resultIcon.innerHTML = '<span class="text-5xl">üëç</span>';
      } else {
        resultIcon.className = 'w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg bg-gradient-to-br from-orange-400 to-red-500';
        resultIcon.innerHTML = '<span class="text-5xl">üí™</span>';
      }

      if (attempts >= 10) {
        document.getElementById('pembahsanNotice').classList.remove('hidden');
        document.getElementById('pembahasanSection').classList.remove('hidden');
        renderPembahasan();
        document.getElementById('retryBtn').classList.add('hidden');
      } else {
        document.getElementById('pembahsanNotice').classList.add('hidden');
        document.getElementById('pembahasanSection').classList.add('hidden');
        document.getElementById('retryBtn').classList.remove('hidden');
      }
    }

    function renderPembahasan() {
      const container = document.getElementById('pembahasanContainer');
      const labels = ['A', 'B', 'C', 'D', 'E'];
      container.innerHTML = questions.map((q, idx) => `
        <div class="bg-gray-50 rounded-2xl p-5 border border-gray-200">
          <div class="flex items-start gap-3 mb-4">
            <span class="w-8 h-8 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center font-bold text-sm flex-shrink-0">${idx + 1}</span>
            <p class="text-gray-800 font-medium">${q.question}</p>
          </div>
          <div class="space-y-2 mb-4">
            ${q.shuffledOptions.map((opt, optIdx) => `
              <div class="flex items-center gap-2 p-2 rounded-lg ${opt.isCorrect ? 'bg-green-100 text-green-700' : 'text-gray-600'}">
                <span class="w-6 h-6 ${opt.isCorrect ? 'bg-green-500 text-white' : 'bg-gray-200'} rounded flex items-center justify-center text-xs font-bold">${labels[optIdx]}</span>
                <span>${opt.text}</span>
                ${opt.isCorrect ? '<span class="ml-auto text-green-600">‚úì Benar</span>' : ''}
              </div>
            `).join('')}
          </div>
          <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
            <p class="text-blue-600 font-semibold text-sm mb-2">üí° Pembahasan:</p>
            <pre class="text-blue-800 text-sm whitespace-pre-wrap font-sans">${q.pembahasan}</pre>
          </div>
        </div>
      `).join('');
    }

    function startQuiz() {
      currentQuestion = 0;
      score = 0;
      selectedAnswer = null;
      prepareQuestions();
      showScreen('quizScreen');
      document.getElementById('attemptDisplay').textContent = attempts + 1;
      renderQuestion();
    }

    function resetAll() {
      attempts = 0;
      studentName = '';
      studentClass = '';
      document.getElementById('namaInput').value = '';
      document.getElementById('kelasInput').value = '';
      showScreen('startScreen');
    }

    document.getElementById('startForm').addEventListener('submit', (e) => {
      e.preventDefault();
      studentName = document.getElementById('namaInput').value.trim();
      studentClass = document.getElementById('kelasInput').value.trim();
      if (studentName && studentClass) {
        startQuiz();
      }
    });

    document.getElementById('nextBtn').addEventListener('click', nextQuestion);
    document.getElementById('retryBtn').addEventListener('click', startQuiz);
    document.getElementById('newUserBtn').addEventListener('click', resetAll);

    async function onConfigChange(newConfig) {
      document.getElementById('quizTitle').textContent = newConfig.quiz_title || defaultConfig.quiz_title;
      document.getElementById('subjectText').textContent = newConfig.subject_text || defaultConfig.subject_text;
    }

    function mapToCapabilities(cfg) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(cfg) {
      return new Map([
        ['quiz_title', cfg.quiz_title || defaultConfig.quiz_title],
        ['subject_text', cfg.subject_text || defaultConfig.subject_text]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
      config = window.elementSdk.config || defaultConfig;
      onConfigChange(config);
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c512c05c126c261',t:'MTc2OTYxMDQ2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
